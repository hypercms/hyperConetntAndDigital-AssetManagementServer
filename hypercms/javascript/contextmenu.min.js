if(null!==localStorage.getItem("is_mobile")&&"false"==localStorage.getItem("is_mobile"))var is_mobile=!1;else var is_mobile=!0;var contextenable=!0,contextxmove=!0,contextymove=!0,tempX=0,tempY=0,scrollX=0,scrollY=0,allow_tr_submit=!0,activatelinks=!1,selectarea=null,is_selectarea=!1,x1=0,y1=0,x2=0,y2=0,x3=0,y3=0,x4=0,y4=0,is_dragndrop=!1,themelocation="";function hcms_clearSelection(){selectarea&& !1==activatelinks&&(window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty())}function hcms_loadSidebar(){if(!parent.document.getElementById("sidebarLayer")||"0px"==parent.document.getElementById("sidebarLayer").style.width||!document.forms.contextmenu_object)return!1;var a=document.forms.contextmenu_object.elements.location.value,b=document.forms.contextmenu_object.elements.folder.value,c=document.forms.contextmenu_object.elements.page.value;return allow_tr_submit&&""!=a&&(""!=b||""!=c)?setTimeout(function(){parent.document.getElementById("sidebarFrame").src="explorer_preview.php?location="+encodeURIComponent(a)+"&folder="+encodeURIComponent(b)+"&page="+encodeURIComponent(c)},300):allow_tr_submit=!0,!0}function hcms_resetContext(){if(document.forms.contextmenu_object&&"hidden"==document.forms.contextmenu_object.elements.contextmenustatus.value){var a=document.forms.contextmenu_object;a.elements.contexttype.value="none",a.elements.page.value="",a.elements.pagename.value="",a.elements.filetype.value="",a.elements.media.value="",a.elements.folder.value="",a.elements.folder_id&&(a.elements.folder_id.value="")}else if(document.forms.contextmenu_user&&"hidden"==document.forms.contextmenu_user.elements.contextmenustatus.value){var a=document.forms.contextmenu_user;a.elements.login.value=""}else if(document.forms.contextmenu_queue&&"hidden"==document.forms.contextmenu_queue.elements.contextmenustatus.value){var a=document.forms.contextmenu_queue;a.elements.site.value="",a.elements.cat.value="",a.elements.location.value="",a.elements.page.value="",a.elements.pagename.value="",a.elements.filetype.value="",a.elements.queueuser.value="",a.elements.queue_id.value=""}return!0}function hcms_lockContext(a){return("true"==a|| !0==a||"false"==a|| !1==a)&&(!0==a&&(a="true"),!1==a&&(a="false"),document.forms.contextmenu_object?document.forms.contextmenu_object.elements.contextmenulocked.value=a:document.forms.contextmenu_user?document.forms.contextmenu_user.elements.contextmenulocked.value=a:document.forms.contextmenu_queue&&(document.forms.contextmenu_queue.elements.contextmenulocked.value=a)),!0}function hcms_isLockedContext(){var a="false";if(document.forms.contextmenu_object?a=document.forms.contextmenu_object.elements.contextmenulocked.value:document.forms.contextmenu_user?a=document.forms.contextmenu_user.elements.contextmenulocked.value:document.forms.contextmenu_queue&&(a=document.forms.contextmenu_queue.elements.contextmenulocked.value),"true"==a|| !0==a)var b=!0;else var b=!1;return b}function hcms_getMouseXY(a){if(!a)var a=window.event;return a.clientX||a.clientY?(hcms_getScrollXY(),tempX=a.clientX+scrollX,tempY=a.clientY+scrollY,x2=a.clientX,y2=a.clientY):(a.pageX||a.pageY)&&(tempX=a.pageX,tempY=a.pageY,x2=a.pageX,y2=a.pageY),tempX<0&&(tempX=0),tempY<0&&(tempY=0),hcms_drawSelectArea(),!0}function hcms_getScrollXY(){return"number"==typeof window.pageYOffset?(scrollY=window.pageYOffset,scrollX=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(scrollY=document.body.scrollTop,scrollX=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(scrollY=document.documentElement.scrollTop,scrollX=document.documentElement.scrollLeft),!0}function hcms_getWindowWidth(a){return(void 0==a&&(a=window),a.innerWidth)?a.innerWidth:a.document.documentElement&&a.document.documentElement.clientWidth?a.document.documentElement.clientWidth:a.document.body.offsetWidth}function hcms_getWindowHeight(a){return(void 0==a&&(a=window),a.innerHeight)?a.innerHeight:a.document.documentElement&&a.document.documentElement.clientHeight?a.document.documentElement.clientHeight:a.document.body.offsetHeight}function hcms_positionContextmenu(){if(document.all){var a=document.all.contextLayer;yoffset=tempY>hcms_getWindowHeight()/2?parseInt(a.style.height)+0:5,contextxmove&&(a.style.left=tempX-5+"px"),contextymove&&(a.style.top=tempY-yoffset+"px"),a.style.visibility="visible"}else if(document.layers){var a=document.layers.contextLayer;yoffset=tempY>hcms_getWindowHeight()/2?parseInt(a.style.height)+0:5,contextxmove&&(a.left=tempX-5+"px"),contextymove&&(a.top=tempY-yoffset+"px"),a.visibility="visible"}else{var a=document.getElementById("contextLayer");yoffset=tempY>hcms_getWindowHeight()/2?parseInt(a.style.height)+0:5,contextxmove&&(a.style.left=tempX-5+"px"),contextymove&&(a.style.top=tempY-yoffset+"px"),a.style.visibility="visible"}return!0}function hcms_showContextmenu(){if(document.forms.contextmenu_object){document.forms.contextmenu_object.elements.contextmenustatus.value="visible";var d=document.forms.contextmenu_object.elements.contexttype.value,c=document.forms.contextmenu_object.elements.multiobject.value,e=c.split("|").length-1;if(contextenable){if("object"==d||"folder"==d||""!=c&&"media"==d){if(document.getElementById("img_preview")&&(document.getElementById("img_preview").className="hcmsIconOn hcmsIconList"),document.getElementById("img_cmsview")&&(document.getElementById("img_cmsview").className="hcmsIconOn hcmsIconList"),document.getElementById("img_notify")&&(document.getElementById("img_notify").className="hcmsIconOn hcmsIconList"),document.getElementById("img_chat")&&e<=1?document.getElementById("img_chat").className="hcmsIconOn hcmsIconList":document.getElementById("img_chat")&&(document.getElementById("img_chat").className="hcmsIconOff hcmsIconList"),document.getElementById("img_restore")&&(document.getElementById("img_restore").className="hcmsIconOn hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOn hcmsIconList"),document.getElementById("img_cut")&&(document.getElementById("img_cut").className="hcmsIconOn hcmsIconList"),document.getElementById("img_copy")&&(document.getElementById("img_copy").className="hcmsIconOn hcmsIconList"),document.getElementById("img_copylinked")&&(document.getElementById("img_copylinked").className="hcmsIconOn hcmsIconList"),document.getElementById("img_publish")&&(document.getElementById("img_publish").className="hcmsIconOn hcmsIconList"),document.getElementById("img_unpublish")&&(document.getElementById("img_unpublish").className="hcmsIconOn hcmsIconList"),document.getElementById("img_unlock")&&(document.getElementById("img_unlock").className="hcmsIconOn hcmsIconList"),document.getElementById("img_fav_create")&&(document.getElementById("img_fav_create").className="hcmsIconOn hcmsIconList"),document.getElementById("img_fav_delete")&&(document.getElementById("img_fav_delete").className="hcmsIconOn hcmsIconList"),document.getElementsByName("img_plugin"))for(var b=document.getElementsByName("img_plugin"),a=0;a<b.length;a++)b[a].className="hcmsIconOn hcmsIconList"}else if(""==c&&"media"==d){if(document.getElementById("img_preview")&&(document.getElementById("img_preview").className="hcmsIconOn hcmsIconList"),document.getElementById("img_cmsview")&&(document.getElementById("img_cmsview").className="hcmsIconOn hcmsIconList"),document.getElementById("img_notify")&&(document.getElementById("img_notify").className="hcmsIconOn hcmsIconList"),document.getElementById("img_chat")&&e<=1?document.getElementById("img_chat").className="hcmsIconOn hcmsIconList":document.getElementById("img_chat")&&(document.getElementById("img_chat").className="hcmsIconOff hcmsIconList"),document.getElementById("img_restore")&&(document.getElementById("img_restore").className="hcmsIconOn hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOn hcmsIconList"),document.getElementById("img_cut")&&(document.getElementById("img_cut").className="hcmsIconOn hcmsIconList"),document.getElementById("img_copy")&&(document.getElementById("img_copy").className="hcmsIconOn hcmsIconList"),document.getElementById("img_copylinked")&&(document.getElementById("img_copylinked").className="hcmsIconOn hcmsIconList"),document.getElementById("img_publish")&&(document.getElementById("img_publish").className="hcmsIconOn hcmsIconList"),document.getElementById("img_unpublish")&&(document.getElementById("img_unpublish").className="hcmsIconOn hcmsIconList"),document.getElementById("img_unlock")&&(document.getElementById("img_unlock").className="hcmsIconOn hcmsIconList"),document.getElementById("img_fav_create")&&(document.getElementById("img_fav_create").className="hcmsIconOn hcmsIconList"),document.getElementById("img_fav_delete")&&(document.getElementById("img_fav_delete").className="hcmsIconOn hcmsIconList"),document.getElementsByName("img_plugin"))for(var b=document.getElementsByName("img_plugin"),a=0;a<b.length;a++)b[a].className="hcmsIconOn hcmsIconList"}else if(document.getElementById("img_preview")&&(document.getElementById("img_preview").className="hcmsIconOff hcmsIconList"),document.getElementById("img_cmsview")&&(document.getElementById("img_cmsview").className="hcmsIconOff hcmsIconList"),document.getElementById("img_notify")&&(document.getElementById("img_notify").className="hcmsIconOff hcmsIconList"),document.getElementById("img_chat")&&(document.getElementById("img_chat").className="hcmsIconOff hcmsIconList"),document.getElementById("img_restore")&&(document.getElementById("img_restore").className="hcmsIconOff hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOff hcmsIconList"),document.getElementById("img_cut")&&(document.getElementById("img_cut").className="hcmsIconOff hcmsIconList"),document.getElementById("img_copy")&&(document.getElementById("img_copy").className="hcmsIconOff hcmsIconList"),document.getElementById("img_copylinked")&&(document.getElementById("img_copylinked").className="hcmsIconOff hcmsIconList"),document.getElementById("img_publish")&&(document.getElementById("img_publish").className="hcmsIconOff hcmsIconList"),document.getElementById("img_unpublish")&&(document.getElementById("img_unpublish").className="hcmsIconOff hcmsIconList"),document.getElementById("img_unlock")&&(document.getElementById("img_unlock").className="hcmsIconOff hcmsIconList"),document.getElementById("img_fav_create")&&(document.getElementById("img_fav_create").className="hcmsIconOff hcmsIconList"),document.getElementById("img_fav_delete")&&(document.getElementById("img_fav_delete").className="hcmsIconOff hcmsIconList"),document.getElementsByName("img_plugin"))for(var b=document.getElementsByName("img_plugin"),a=0;a<b.length;a++)b[a].className="hcmsIconOff hcmsIconList"}}else if(document.forms.contextmenu_user){document.forms.contextmenu_user.elements.contextmenustatus.value="visible";var c=document.forms.contextmenu_user.elements.multiobject.value;""!=document.forms.contextmenu_user.elements.login.value?(document.getElementById("img_edit")&&(document.getElementById("img_edit").className="hcmsIconOn hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOn hcmsIconList")):(document.getElementById("img_edit")&&(document.getElementById("img_edit").className="hcmsIconOff hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOff hcmsIconList"))}else if(document.forms.contextmenu_queue){document.forms.contextmenu_queue.elements.contextmenustatus.value="visible";var c=document.forms.contextmenu_queue.elements.multiobject.value;""!=document.forms.contextmenu_queue.elements.queue_id.value?(document.getElementById("img_edit")&&(document.getElementById("img_edit").className="hcmsIconOn hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOn hcmsIconList")):(document.getElementById("img_edit")&&(document.getElementById("img_edit").className="hcmsIconOff hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOff hcmsIconList"))}return hcms_positionContextmenu(),!0}function hcms_hideContextmenu(){return document.forms.contextmenu_object&&(document.forms.contextmenu_object.elements.contextmenustatus.value="hidden"),document.forms.contextmenu_user&&(document.forms.contextmenu_user.elements.contextmenustatus.value="hidden"),document.forms.contextmenu_queue&&(document.forms.contextmenu_queue.elements.contextmenustatus.value="hidden"),document.all?document.all.contextLayer.style.visibility="hidden":document.layers?document.layers.contextLayer.visibility="hidden":(contextelement=document.getElementById("contextLayer")).style.visibility="hidden",!0}function hcms_submitToWindow(a,b,c,d){return!!document.forms[a]&&(winName="popup"+hcms_uniqid(),document.forms[a].target=winName,hcms_openWindow("",winName,b,c,d),document.forms[a].submit(),!0)}function hcms_submitToPopup(b,a){if(!document.forms[b]||""==a)return!1;var c=document.forms[b];return!!window.top.openPopup("empty.php",a)&&(c.target=a+"Frame",c.submit(),!0)}function hcms_openPopup(a,b){return""!=a&&""!=b&&(window.top.openPopup(a,b),!0)}function hcms_emptyRecycleBin(a){return hcms_lockContext("true"),document.forms.contextmenu_object&& !0==(check=confirm_delete())&&(document.forms.contextmenu_object.attributes.action.value="popup_status.php",document.forms.contextmenu_object.elements.action.value="emptybin",document.forms.contextmenu_object.elements.force.value="start",document.forms.contextmenu_object.elements.token.value=a,hcms_submitToPopup("contextmenu_object","recyclebin")),hcms_lockContext("false"),!0}function hcms_createContextmenuItem(b){if(hcms_lockContext("true"),null!==localStorage.getItem("windowwidth")||localStorage.getItem("windowwidth")>0)var o=localStorage.getItem("windowwidth");else var o=800;if(null!==localStorage.getItem("windowheight")||localStorage.getItem("windowheight")>0)var p=localStorage.getItem("windowheight");else var p=1e3;if(null!==localStorage.getItem("object_newwindow")&&"true"==localStorage.getItem("object_newwindow"))var l=!0;else var l=!1;if(null!==localStorage.getItem("message_newwindow")&&"true"==localStorage.getItem("message_newwindow"))var q=!0;else var q=!1;if(null!==localStorage.getItem("user_newwindow")&&"true"==localStorage.getItem("user_newwindow"))var t=!0;else var t=!1;if(document.forms.contextmenu_object){var e=!1,a=document.forms.contextmenu_object,j=a.elements.contexttype.value,f=a.elements.site.value,i=a.elements.cat.value,g=a.elements.location.value,d=a.elements.page.value;a.elements.pagename.value,a.elements.filetype.value,a.elements.media.value;var k=a.elements.folder.value,h=a.elements.multiobject.value,w=h.split("|").length-1,c=a.elements.token.value;("object"==j||"media"==j||"folder"==j||"none"==j)&&((("preview"==b||"cmsview"==b||"chat"==b)&&("object"==j||"media"==j?URLparaView="site="+encodeURIComponent(f)+"&cat="+encodeURIComponent(i)+"&location="+encodeURIComponent(g)+"&page="+encodeURIComponent(d)+"&token="+c:"folder"==j&&(URLparaView="site="+encodeURIComponent(f)+"&cat="+encodeURIComponent(i)+"&location="+encodeURIComponent(g+k)+"/&folder="+encodeURIComponent(k)+"&page="+encodeURIComponent(d)+"&token="+c)),"preview"==b)?(""!=k&&(g=g+k+"/"),openObjectView(g,d,"preview")):"cmsview"==b?h.split("|").length>2&&parent&&parent.frames&&parent.frames.controlFrame&&parent.frames.controlFrame.submitToWindow?!0==l?parent.frames.controlFrame.submitToWindow("page_multiedit.php","","multiedit","status=yes,scrollbars=yes,resizable=yes",o,p):parent.frames.controlFrame.submitToMainFrame("page_multiedit.php",""):!0==l?hcms_openWindow("frameset_content.php?ctrlreload=yes&"+URLparaView,"","status=yes,scrollbars=no,resizable=yes",o,p):top.openMainView("frameset_content.php?ctrlreload=yes&"+URLparaView):"notify"==b?(URLfile="popup_notify.php",a.attributes.action.value=URLfile,hcms_submitToPopup("contextmenu_object","notify")):"chat"==b?w<=1&&sendtochat("hcms_openWindow('frameset_content.php?ctrlreload=yes&"+URLparaView+"', '', 'status=yes,scrollbars=no,resizable=yes', 800, 1000);"):"restore"==b?(a.attributes.action.value="popup_status.php",a.elements.action.value=b,a.elements.force.value="start",hcms_submitToPopup("contextmenu_object","restore"+hcms_uniqid())):"delete"==b?((""!=h||""!=d||""!=k)&& !0==hcms_permission.delete&&(e=confirm_delete()),!0==e&&(a.attributes.action.value="popup_status.php",a.elements.action.value=b,a.elements.force.value="start",hcms_submitToPopup("contextmenu_object","delete"+hcms_uniqid()))):"cut"==b||"copy"==b||"linkcopy"==b?!0==hcms_permission.rename&&(a.attributes.action.value="popup_action.php",a.elements.action.value=b,hcms_submitToPopup("contextmenu_object",b+hcms_uniqid())):"paste"==b?""!=f&&""!=g&& !0==hcms_permission.paste&&hcms_openPopup("popup_status.php?force=start&action="+encodeURIComponent(b)+"&site="+encodeURIComponent(f)+"&cat="+encodeURIComponent(i)+"&location="+encodeURIComponent(g)+"&token="+c,"paste"+hcms_uniqid()):"publish"==b||"unpublish"==b?!0==hcms_permission.publish&&(URLfile="popup_publish.php",a.attributes.action.value=URLfile,a.elements.action.value=b,a.elements.force.value="start",hcms_submitToPopup("contextmenu_object","publish"+hcms_uniqid())):"favorites_create"==b?(a.attributes.action.value="popup_action.php",a.elements.action.value="page_favorites_create",hcms_submitToPopup("contextmenu_object","fav"+hcms_uniqid()),allow_tr_submit=!1):"favorites_delete"==b?(a.attributes.action.value="popup_action.php",a.elements.action.value="page_favorites_delete",hcms_submitToPopup("contextmenu_object","fav"+hcms_uniqid()),allow_tr_submit=!1):"checkin"==b?(a.attributes.action.value="popup_action.php",a.elements.action.value="page_unlock",hcms_submitToPopup("contextmenu_object","checkin"+hcms_uniqid()),allow_tr_submit=!1):""!=b&&(a.attributes.action.value=b,a.attributes.target.value="workplFrame",a.elements.action.value="plugin",a.submit(),allow_tr_submit=!1))}else if(document.forms.contextmenu_user){var e=!1,a=document.forms.contextmenu_user,f=a.elements.site.value,u=a.elements.group.value,r=a.elements.login.value,h=a.multiobject.value,c=a.elements.token.value;"edit"==b?!0==t?hcms_openWindow("user_edit.php?site="+encodeURIComponent(f)+"&group="+encodeURIComponent(u)+"&login="+encodeURIComponent(r)+"&token="+c,"edit","status=yes,scrollbars=yes,resizable=yes",560,800):parent.openPopup("user_edit.php?site="+encodeURIComponent(f)+"&group="+encodeURIComponent(u)+"&login="+encodeURIComponent(r)+"&token="+c):"delete"==b&&((""!=h||""!=r)&&(e=confirm_delete()),!0==e&&(a.attributes.action.value="control_user_menu.php",a.attributes.target.value="controlFrame",a.elements.action.value=b,a.submit(),allow_tr_submit=!1))}else if(document.forms.contextmenu_queue){var e=!1,a=document.forms.contextmenu_queue,f=a.elements.site.value,i=a.elements.cat.value,g=a.elements.location.value,d=a.elements.page.value;a.elements.pagename.value,a.elements.filetype.value;var m=a.elements.queueuser.value,n=a.elements.queue_id.value,h=a.elements.multiobject.value,c=a.elements.token.value;"edit"==b?""!=f&&""!=g?!0==l?hcms_openWindow("frameset_content.php?site="+encodeURIComponent(f)+"&ctrlreload=yes&cat="+encodeURIComponent(i)+"&location="+encodeURIComponent(g)+"&page="+encodeURIComponent(d)+"&queueuser="+encodeURIComponent(m)+"&queue_id="+encodeURIComponent(n)+"&token="+c,"","status=yes,scrollbars=no,resizable=yes",800,1e3):top.openMainView("frameset_content.php?site="+encodeURIComponent(f)+"&ctrlreload=yes&cat="+encodeURIComponent(i)+"&location="+encodeURIComponent(g)+"&page="+encodeURIComponent(d)+"&queueuser="+encodeURIComponent(m)+"&queue_id="+encodeURIComponent(n)+"&token="+c):""!=d&&(!0==q?hcms_openWindow("user_sendlink.php?mailfile="+encodeURIComponent(d)+"&cat="+encodeURIComponent(i)+"&queueuser="+encodeURIComponent(m)+"&queue_id="+encodeURIComponent(n)+"&token="+c,"","status=yes,scrollbars=no,resizable=yes",600,800):""!=d&&parent.openPopup("user_sendlink.php?mailfile="+encodeURIComponent(d)+"&cat="+encodeURIComponent(i)+"&queueuser="+encodeURIComponent(m)+"&queue_id="+encodeURIComponent(n)+"&token="+c)):"delete"==b&&((""!=h||""!=d)&&(e=confirm_delete()),!0==e&&(a.attributes.action.value="control_queue_menu.php",a.attributes.target.value="controlFrame",a.elements.action.value=b,a.submit(),allow_tr_submit=!1))}else if(document.forms.contextmenu_message){var e=!1,v=document.forms.contextmenu_message.elements.messageuser.value,s=document.forms.contextmenu_message.elements.message_id.value,h=document.forms.contextmenu_message.elements.multiobject.value,c=document.forms.contextmenu_message.elements.token.value;"edit"==b?!0==q?hcms_openWindow("user_sendlink.php?mailfile="+encodeURIComponent(s)+"&cat=comp&messageuser="+encodeURIComponent(v)+"&token="+c,"","status=yes,scrollbars=no,resizable=yes",600,800):parent.openPopup("user_sendlink.php?mailfile="+encodeURIComponent(s)+"&cat=comp&messageuser="+encodeURIComponent(v)+"&token="+c):"delete"==b&&((""!=h||""!=s)&&(e=confirm_delete()),!0==e&&(document.forms.contextmenu_message.attributes.action.value="control_message_menu.php",document.forms.contextmenu_message.attributes.target.value="controlFrame",document.forms.contextmenu_message.elements.action.value=b,document.forms.contextmenu_message.submit(),allow_tr_submit=!1))}return hcms_lockContext("false"),!0}function hcms_setObjectcontext(g,h,i,b,j,k,c,d,l,m){if(document.forms.contextmenu_object&& !1==hcms_isLockedContext()){if(hcms_hideContextmenu(),!f)var e,f=window.event;void 0!=f.stopPropagation&&f.stopPropagation(),e=""!=d?"folder":""!=c?"media":""!=b?"object":"none";var a=document.forms.contextmenu_object;a.style.display="block",document.forms.contextmenu_column&&(document.forms.contextmenu_column.style.display="none"),a.elements.contexttype.value=e,a.elements.xpos.value=tempX,a.elements.ypos.value=tempY,a.elements.site.value=g,a.elements.cat.value=h,a.elements.location.value=i,a.elements.page.value=b,a.elements.pagename.value=j,a.elements.filetype.value=k,a.elements.media.value=c,a.elements.folder.value=d,a.elements.folder_id&&(a.elements.folder_id.value=l),a.elements.token.value=m}return!0}function hcms_setColumncontext(){if(document.forms.contextmenu_column){if(hcms_hideContextmenu(),!a)var a=window.event;void 0!=a.stopPropagation&&a.stopPropagation(),document.forms.contextmenu_column.style.display="block",document.forms.contextmenu_object&&(document.forms.contextmenu_object.style.display="none")}return!0}function hcms_setUsercontext(c,d,e){if(document.forms.contextmenu_user&& !1==hcms_isLockedContext()){if(hcms_hideContextmenu(),!b)var b=window.event;void 0!=b.stopPropagation&&b.stopPropagation();var a=document.forms.contextmenu_user;a.elements.xpos.value=tempX,a.elements.ypos.value=tempY,a.elements.site.value=c,a.elements.login.value=d,a.elements.token.value=e}return!0}function hcms_setQueuecontext(c,d,e,f,g,h,i,j,k){if(document.forms.contextmenu_queue&& !1==hcms_isLockedContext()){if(hcms_hideContextmenu(),!b)var b=window.event;void 0!=b.stopPropagation&&b.stopPropagation();var a=document.forms.contextmenu_queue;a.elements.xpos.value=tempX,a.elements.ypos.value=tempY,a.elements.site.value=c,a.elements.cat.value=d,a.elements.location.value=e,a.elements.page.value=f,a.elements.pagename.value=g,a.elements.filetype.value=h,a.elements.queueuser.value=i,a.elements.queue_id.value=j,a.elements.token.value=k}return!0}function hcms_setMessagecontext(c,d,e){if(document.forms.contextmenu_message&& !1==hcms_isLockedContext()){if(hcms_hideContextmenu(),!b)var b=window.event;void 0!=b.stopPropagation&&b.stopPropagation();var a=document.forms.contextmenu_message;a.elements.xpos.value=tempX,a.elements.ypos.value=tempY,a.elements.messageuser.value=c,a.elements.message_id.value=d,a.elements.token.value=e}return!0}function hcms_replace(a,c,f){var e=a.length,d=c.length;if(0==e||0==d)return a;var b=a.indexOf(c);if(!b&&c!=a.substring(0,d)|| -1==b)return a;var g=a.substring(0,b)+f;return b+d<e&&(g+=hcms_replace(a.substring(b+d,e),c,f)),g}function hcms_endsWith(a,b){return -1!==a.indexOf(b,a.length-b.length)}function hcms_selectObject(b,l){var d=!1,m=!1;if(""==b||(b=(b=(b=(b=b.replace("g","")).replace("h","")).replace("_0","")).replace("t",""),document.forms.contextmenu_object?d=document.forms.contextmenu_object:document.forms.contextmenu_user?d=document.forms.contextmenu_user:document.forms.contextmenu_queue?d=document.forms.contextmenu_queue:document.forms.contextmenu_message&&(d=document.forms.contextmenu_message),!1==d))return!1;if(""==d.elements.multiobject.value&&(hcms_unselectAll(!0),m=!0),!0==hcms_keyPressed("ctrl",l)||"selectarea"==l||is_mobile){var c=d.elements.multiobject.value,j=c+"|",i=document.getElementById("h"+b+"_0"),e=i.getElementsByTagName("A");if(e)var a=e[0].getAttribute("data-objectpath");else var a="";return""!=a&&("|"==c|| -1==j.indexOf("|"+a+"|")?(d.elements.multiobject.value=c+"|"+a,document.getElementById("g"+b).className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+b).className="hcmsObjectSelected"),hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0):""!=c&&(c==a?d.elements.multiobject.value=hcms_replace(c,a,""):hcms_endsWith(c,"|"+a)?d.elements.multiobject.value=hcms_replace(c,"|"+a,""):d.elements.multiobject.value=hcms_replace(c,"|"+a+"|","|"),document.getElementById("g"+b).className="hcmsObjectUnselected",document.getElementById("objectgallery")&&(document.getElementById("t"+b).className="hcmsObjectUnselected"),hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0))}if(!0==hcms_keyPressed("shift",l)){var c=d.elements.multiobject.value,j=c+"|",i=document.getElementById("h"+b+"_0"),e=i.getElementsByTagName("A");if(e)var a=e[0].getAttribute("data-objectpath");else var a="";if(""==a)return!1;if(""==c)return d.elements.multiobject.value=c+"|"+a,document.getElementById("g"+b).className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+b).className="hcmsObjectSelected"),hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0;if(""!=c){var n=c.substring(c.lastIndexOf("|")+1),o=a,g=document.getElementById("objectlist").getElementsByTagName("TR"),b=0,f=!1,k=!1,h="";for(i=0;i<g.length;i++){var e=g[i].getElementsByTagName("A");a=e?e[0].getAttribute("data-objectpath"):"","1"==h&& !0==f&& !1==k&& -1==j.indexOf("|"+a+"|")&&(c=c+"|"+a,b=(b=g[i].id).substr(1),g[i].className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+b).className="hcmsObjectSelected")),a==n?(""==h&&(h="1"),!1==f?f=!0:!0==f&&(k=!0)):a==o&&(""==h&&(h="0"),!1==f?f=!0:!0==f&&(k=!0)),"0"==h&& !0==f&& !1==k&& -1==j.indexOf("|"+a+"|")&&(c=c+"|"+a,b=(b=g[i].id).substr(1),g[i].className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+b).className="hcmsObjectSelected"))}return d.elements.multiobject.value=c,hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0}}else{!1==m&&hcms_unselectAll(!1);var i=document.getElementById("h"+b+"_0"),e=i.getElementsByTagName("A");if(e[0])var a=e[0].getAttribute("data-objectpath");else var a="";return""!=a&&(d.elements.multiobject.value="|"+a,document.getElementById("g"+b).className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+b).className="hcmsObjectSelected"),hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0)}}function hcms_updateControlObjectListMenu(){return!!document.forms.contextmenu_object&&(document.forms.contextmenu_object.attributes.action.value="control_objectlist_menu.php",document.forms.contextmenu_object.attributes.target.value="controlFrame",document.forms.contextmenu_object.elements.action.value="",allow_tr_submit&&""!=document.forms.contextmenu_object.elements.location.value?document.forms.contextmenu_object.submit():allow_tr_submit=!0,is_mobile||hcms_loadSidebar(),!0)}function hcms_updateControlUserMenu(){if(!document.forms.contextmenu_user)return!1;var a=document.forms.contextmenu_user;return a.attributes.action.value="control_user_menu.php",a.attributes.target.value="controlFrame",a.elements.action.value="",allow_tr_submit?a.submit():allow_tr_submit=!0,!0}function hcms_updateControlQueueMenu(){if(!document.forms.contextmenu_queue)return!1;var a=document.forms.contextmenu_queue;return a.attributes.action.value="control_queue_menu.php",a.attributes.target.value="controlFrame",a.elements.action.value="",allow_tr_submit?a.submit():allow_tr_submit=!0,!0}function hcms_updateControlMessageMenu(){return!!document.forms.contextmenu_message&&(document.forms.contextmenu_message.attributes.action.value="control_message_menu.php",document.forms.contextmenu_message.attributes.target.value="controlFrame",document.forms.contextmenu_message.elements.action.value="",allow_tr_submit?document.forms.contextmenu_message.submit():allow_tr_submit=!0,!0)}function hcms_selectAll(a){if(a=void 0===a||a,document.getElementById("objectlist")){var e="",b="",c=document.getElementById("objectlist"),d=c.getElementsByTagName("TR");for(i=0;i<d.length;i++)(e=d[i].getElementsByTagName("A"))&&""!=(object=e[0].getAttribute("data-objectpath"))&&(b=b+"|"+object),d[i].className="hcmsObjectSelected"}if(document.getElementById("objectgallery")){var c=document.getElementById("objectgallery"),f=c.children;for(i=0;i<f.length;i++)f[i].className="hcmsObjectSelected"}return document.forms.contextmenu_object&&document.forms.contextmenu_object.elements.multiobject?(document.forms.contextmenu_object.elements.multiobject.value=b,a&&hcms_updateControlObjectListMenu()):document.forms.contextmenu_user&&document.forms.contextmenu_user.elements.multiobject?(document.forms.contextmenu_user.elements.multiobject.value=b,a&&hcms_updateControlUserMenu()):document.forms.contextmenu_queue&&document.forms.contextmenu_queue.elements.multiobject?(document.forms.contextmenu_queue.elements.multiobject.value=b,a&&hcms_updateControlQueueMenu()):document.forms.contextmenu_message&&document.forms.contextmenu_message.elements.multiobject&&(document.forms.contextmenu_message.elements.multiobject.value=b,a&&hcms_updateControlMessageMenu()),!0}function hcms_unselectAll(a){if(a=void 0===a||a,document.getElementById("objectlist")){var b=document.getElementById("objectlist"),c=b.getElementsByTagName("TR");for(i=0;i<c.length;i++)c[i].className="hcmsObjectUnselected"}if(document.getElementById("objectgallery")){var b=document.getElementById("objectgallery"),d=b.children;for(i=0;i<d.length;i++)d[i].className="hcmsObjectUnselected"}return document.forms.contextmenu_object&&document.forms.contextmenu_object.elements.multiobject.value?(document.forms.contextmenu_object.elements.multiobject.value="",a&&hcms_updateControlObjectListMenu()):document.forms.contextmenu_user&&document.forms.contextmenu_user.elements.multiobject.value?(document.forms.contextmenu_user.elements.multiobject.value="",a&&hcms_updateControlUserMenu()):document.forms.contextmenu_queue&&document.forms.contextmenu_queue.elements.multiobject.value?(document.forms.contextmenu_queue.elements.multiobject.value="",a&&hcms_updateControlQueueMenu()):document.forms.contextmenu_message&&document.forms.contextmenu_message.elements.multiobject.value&&(document.forms.contextmenu_message.elements.multiobject.value="",a&&hcms_updateControlMessageMenu()),!0}function hcms_Contextmenu(a){if(!a)var a=window.event;return!0==activatelinks||(void 0!=a.preventDefault&&a.preventDefault(),void 0!=a.stopPropagation&&a.stopPropagation(),!1)}function hcms_rightClickContext(a){if(!a)var a=window.event;return!1==activatelinks&&(a.which&&(2==a.which||3==a.which)?hcms_showContextmenu():a.button&&(2==a.button||3==a.button)&&hcms_showContextmenu(),hcms_startSelectArea(a)),!1}function hcms_leftClickContext(a){if(!a)var c,b,a=window.event;var d=0;return is_mobile&& !0==hcms_permission.minnavframe&&"function"==typeof top.minNavFrame&&top.minNavFrame(),hcms_clearSelection(),document.forms.contextmenu_object?(c=document.forms.contextmenu_object.elements.page.value,b=document.forms.contextmenu_object.elements.multiobject.value):document.forms.contextmenu_user?(c=document.forms.contextmenu_user.elements.login.value,b=document.forms.contextmenu_user.elements.multiobject.value):document.forms.contextmenu_queue?(c=document.forms.contextmenu_queue.elements.page.value,b=document.forms.contextmenu_queue.elements.multiobject.value):document.forms.contextmenu_message&&(c=document.forms.contextmenu_message.elements.message_id.value,b=document.forms.contextmenu_message.elements.multiobject.value),""!=b&&(d=b.split("|").length-1),(0==a.which||1==a.which||0==a.button||1==a.button)&&(hcms_hideContextmenu(),!1==hcms_keyPressed("",a)&&""==c&&d>=1&& !1==is_selectarea&&(hcms_unselectAll(!0),hcms_resetContext())),!1}function hcms_getlink(a,b){if(""==a)return!1;var c="",d="";return($.ajax({async:!1,type:"POST",url:"service/getlink.php",data:{location:a},dataType:"json",success:function(a){a.success&&(c=a.downloadlink,d=a.downloadlink)}}),"download"==b&&""!=c)?c:"wrapper"==b&&""!=d&&d}function hcms_activateLinks(d){if(!d)var d=window.event;if(!1==is_dragndrop&&hcms_keyPressed("alt",d)&&document.forms.contextmenu_object){for(var g=document.getElementsByTagName("A"),h=!1,i=!1,e=0;e<g.length;e++){var a=g[e],b=a.getAttribute("data-href"),j=a.getAttribute("data-objectpath"),f=a.getAttribute("data-linktype");if("download"==f||"wrapper"==f){if(!1==activatelinks){if(""!=b){var c=document.createAttribute("href");c.nodeValue=b,a.setAttributeNode(c)}else{!1==i&&document.getElementById("hcmsLoadScreen")&&(document.getElementById("hcmsLoadScreen").style.display="inline",i=!0);var b=hcms_getlink(j,f);a.setAttribute("data-href",b);var c=document.createAttribute("href");c.nodeValue=b,a.setAttributeNode(c)}}else{var k=a.getAttributeNode("href");a.removeAttributeNode(k)}h=!0}}!0==h&&(!1==activatelinks?(document.getElementsByTagName("body")[0].className="hcmsWorkplaceObjectlistLinks",activatelinks=!0,document.getElementById("hcmsLoadScreen")&&(document.getElementById("hcmsLoadScreen").style.display="none")):(document.getElementsByTagName("body")[0].className="hcmsWorkplaceObjectlist",activatelinks=!1))}}function hcms_startSelectArea(a){if(!a)var a=window.event;return!1==activatelinks&&!!selectarea&&(0==a.which||1==a.which||0==a.button||1==a.button)&&(x1=a.clientX,y1=a.clientY,is_dragndrop=!1,!0)}function hcms_drawSelectArea(){return!1==is_dragndrop&& !1==activatelinks&&!!selectarea&&x1>0&&y1>0&&(is_selectarea=!0,x3=Math.min(x1,x2),x4=Math.max(x1,x2),y3=Math.min(y1,y2),y4=Math.max(y1,y2),hcms_clearSelection(),(""==selectarea.style.display||"none"==selectarea.style.display)&&x4-x3>5&&y4-y3>5&&(selectarea.style.display="inline"),"none"!=selectarea.style.display)&&(selectarea.style.left=x3+"px",selectarea.style.top=y3+"px",selectarea.style.width=x4-x3+"px",selectarea.style.height=y4-y3+"px",!0)}function hcms_endSelectArea(){var c=!1;if(!1==is_dragndrop&& !1==activatelinks&&selectarea&&"none"!=selectarea.style.display&&x1>0&&y1>0&&0!=x3&&0!=y3&&0!=x4&&0!=y4&&x4-x3>5&&y4-y3>5){if(hcms_unselectAll(!1),document.getElementById("objectLayer")&&"visible"==document.getElementById("objectLayer").style.visibility)var h,d,e,a=document.getElementsByClassName("hcmsObjectListMarker"),f=80,g=10;else if(document.getElementById("galleryviewLayer")&&"visible"==document.getElementById("galleryviewLayer").style.visibility)var a=document.getElementsByClassName("hcmsObjectGalleryMarker"),f=80,g=80;if(a&&a.length>0){for(var b=0;b<a.length;b++)d=(h=a[b].getBoundingClientRect()).left,e=h.top,d>=x3-f&&e>=y3-g&&d<=x4-f&&e<=y4-g&&(hcms_selectObject(a[b].parentElement.id,"selectarea"),c=!0);c&&(document.forms.contextmenu_object?setTimeout(hcms_updateControlObjectListMenu,300):document.forms.contextmenu_user?setTimeout(hcms_updateControlUserMenu,300):document.forms.contextmenu_queue?setTimeout(hcms_updateControlQueueMenu,300):document.forms.contextmenu_message&&setTimeout(hcms_updateControlMessageMenu,300))}}return x1=0,y1=0,x2=0,y2=0,x3=0,y3=0,x4=0,y4=0,selectarea&&(setTimeout(function(){is_selectarea=!1},300),selectarea.style.display="none"),!!c}function hcms_collectObjectpath(){if(document.getElementById("h0_0"))for(var b=null,a=0;b=document.getElementById("h"+a+"_0");){var c=b.getElementsByTagName("A");c[0].getAttribute("data-objectpath")&&(hcms_objectpath[a]=c[0].getAttribute("data-objectpath")),a++}hcms_objectpath&&(parent.hcms_objectpath=hcms_objectpath)}function hcms_findElementByTagName(a,b){if(""!=b){if(b=b.toUpperCase(),a.tagName==b)return a;for(;a.parentNode;)if((a=a.parentNode).tagName==b)return a}return null}function hcms_setDragImage(a){if(!0==is_dragndrop&&"ie"!=hcms_getBrowserName()&&a.dataTransfer&&"function"==typeof a.dataTransfer.setDragImage){var b=document.createElement("img");b.src=themelocation+"/img/button_file_copy.png",a.dataTransfer.setDragImage(b,32,32)}}function hcms_drag(a){if(!is_mobile&&"ie"!=hcms_getBrowserName()&&a.dataTransfer&&"function"==typeof a.dataTransfer.setData&&document.forms.contextmenu_object){is_dragndrop=!0,hcms_setDragImage(a);var b=document.forms.contextmenu_object;a.dataTransfer.setData("action",b.elements.action.value),a.dataTransfer.setData("force",b.elements.force.value),a.dataTransfer.setData("contexttype",b.elements.contexttype.value),a.dataTransfer.setData("site",b.elements.site.value),a.dataTransfer.setData("cat",b.elements.cat.value),a.dataTransfer.setData("location",b.elements.location.value),a.dataTransfer.setData("page",b.elements.page.value),a.dataTransfer.setData("pagename",b.elements.pagename.value),a.dataTransfer.setData("filetype",b.elements.filetype.value),a.dataTransfer.setData("media",b.elements.media.value),a.dataTransfer.setData("folder",b.elements.folder.value),a.dataTransfer.setData("multiobject",b.elements.multiobject.value),a.dataTransfer.setData("token",b.elements.token.value),a.dataTransfer.setData("convert_type",b.elements.convert_type.value),a.dataTransfer.setData("convert_cfg",b.elements.convert_cfg.value)}}function hcms_drop(a){if(!is_mobile&&"ie"!=hcms_getBrowserName()&&a.target&&a.dataTransfer&&"function"==typeof a.dataTransfer.getData&&a.dataTransfer.getData("site")&&a.dataTransfer.getData("location")&&document.forms.contextmenu_object){a.preventDefault();var c=hcms_findElementByTagName(a.target,"A");if(c){var b=document.forms.memory,d=c.getAttribute("data-objectpath");b.attributes.action.value="popup_status.php",hcms_keyPressed("alt",a)?b.elements.action.value="linkcopy->paste":hcms_keyPressed("ctrl",a)?b.elements.action.value="copy->paste":b.elements.action.value="cut->paste",b.elements.force.value="start",b.elements.contexttype.value=a.dataTransfer.getData("contexttype"),b.elements.site.value=a.dataTransfer.getData("site"),b.elements.cat.value=a.dataTransfer.getData("cat"),b.elements.location.value=a.dataTransfer.getData("location"),b.elements.targetlocation.value=d,b.elements.page.value=a.dataTransfer.getData("page"),b.elements.pagename.value=a.dataTransfer.getData("pagename"),b.elements.filetype.value=a.dataTransfer.getData("filetype"),b.elements.media.value=a.dataTransfer.getData("media"),b.elements.folder.value=a.dataTransfer.getData("folder"),b.elements.multiobject.value=a.dataTransfer.getData("multiobject"),b.elements.token.value=a.dataTransfer.getData("token"),b.elements.convert_type.value=a.dataTransfer.getData("convert_type"),b.elements.convert_cfg.value=a.dataTransfer.getData("convert_cfg"),hcms_submitToPopup("memory","drop")}}else is_mobile||a.preventDefault()}function hcms_allowDrop(a){if(!is_mobile&&"ie"!=hcms_getBrowserName()&&a.dataTransfer.items&&document.forms.contextmenu_object){a.preventDefault();for(var b=0;b<a.dataTransfer.items.length;b++)if("file"===a.dataTransfer.items[b].kind&&""!=a.dataTransfer.items[b].type){var c=document.forms.contextmenu_object,e=c.elements.site.value,f=c.elements.cat.value,d=c.elements.location.value;e&&f&&d&&window.top.openPopup("popup_upload_html.php?uploadmode=multi&site="+encodeURIComponent(e)+"&cat="+encodeURIComponent(f)+"&location="+encodeURIComponent(d),"upload"+hcms_md5(d).substr(0,13))}}}hcms_addEvent("keydown",document,function(a){!0==hcms_permission.shortcuts&&(hcms_activateLinks(a),hcms_keyPressed("ctrl",a)&&("a"===a.key||"A"==a.key)&&(a.preventDefault(),hcms_selectAll()),hcms_keyPressed("ctrl",a)&&("x"==a.key||"X"==a.key)&&(a.preventDefault(),hcms_createContextmenuItem("cut")),hcms_keyPressed("ctrl",a)&&("c"==a.key||"C"==a.key)&&(a.preventDefault(),hcms_createContextmenuItem("copy")),hcms_keyPressed("ctrl",a)&&("y"==a.key||"Y"==a.key)&&(a.preventDefault(),hcms_createContextmenuItem("linkcopy")),hcms_keyPressed("ctrl",a)&&("v"==a.key||"V"==a.key)&&(a.preventDefault(),hcms_createContextmenuItem("paste")),("Delete"==a.key||8==a.keyCode||46==a.keyCode)&&(a.preventDefault(),hcms_createContextmenuItem("delete")))}),hcms_addEvent("mousemove",document,function(a){hcms_getMouseXY(a)}),hcms_addEvent("contextmenu",document,function(a){hcms_Contextmenu(a)}),hcms_addEvent("mousedown",document,function(a){hcms_rightClickContext(a)}),hcms_addEvent("mouseup",document,function(a){hcms_endSelectArea(a)}),hcms_addEvent("click",document,function(a){hcms_leftClickContext(a)}),window.alert=top.alert