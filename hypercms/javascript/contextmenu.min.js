if(null!==localStorage.getItem("is_mobile")&&"false"==localStorage.getItem("is_mobile"))var is_mobile=!1;else var is_mobile=!0;var contextenable=!0,contextxmove=!0,contextymove=!0,tempX=0,tempY=0,scrollX=0,scrollY=0,allow_tr_submit=!0,activatelinks=!1,selectarea=null,is_selectarea=!1,x1=0,y1=0,x2=0,y2=0,x3=0,y3=0,x4=0,y4=0,is_dragndrop=!1,themelocation="";function hcms_clearSelection(){selectarea&&!1==activatelinks&&(window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty())}function hcms_loadSidebar(){if(!parent.document.getElementById("sidebarLayer")||"0px"==parent.document.getElementById("sidebarLayer").style.width||!document.forms.contextmenu_object)return!1;var e=document.forms.contextmenu_object.elements.location.value,t=document.forms.contextmenu_object.elements.folder.value,n=document.forms.contextmenu_object.elements.page.value,s=document.forms.contextmenu_object.elements.multiobject.value.split("|").length-1;return allow_tr_submit&&""!=e&&(""!=t||""!=n)&&s<2?setTimeout(function(){parent.document.getElementById("sidebarFrame").src="explorer_preview.php?location="+encodeURIComponent(e)+"&folder="+encodeURIComponent(t)+"&page="+encodeURIComponent(n)},300):allow_tr_submit=!0,!0}function hcms_resetContext(){if(document.forms.contextmenu_object&&"hidden"==document.forms.contextmenu_object.elements.contextmenustatus.value){var e=document.forms.contextmenu_object;e.elements.contexttype.value="none",e.elements.page.value="",e.elements.pagename.value="",e.elements.filetype.value="",e.elements.media.value="",e.elements.folder.value="",e.elements.folder_id&&(e.elements.folder_id.value="")}else if(document.forms.contextmenu_user&&"hidden"==document.forms.contextmenu_user.elements.contextmenustatus.value){var e=document.forms.contextmenu_user;e.elements.login.value=""}else if(document.forms.contextmenu_queue&&"hidden"==document.forms.contextmenu_queue.elements.contextmenustatus.value){var e=document.forms.contextmenu_queue;e.elements.site.value="",e.elements.cat.value="",e.elements.location.value="",e.elements.page.value="",e.elements.pagename.value="",e.elements.filetype.value="",e.elements.queueuser.value="",e.elements.queue_id.value=""}return!0}function hcms_lockContext(e){return("true"==e||!0==e||"false"==e||!1==e)&&(!0==e&&(e="true"),!1==e&&(e="false"),document.forms.contextmenu_object?document.forms.contextmenu_object.elements.contextmenulocked.value=e:document.forms.contextmenu_user?document.forms.contextmenu_user.elements.contextmenulocked.value=e:document.forms.contextmenu_queue&&(document.forms.contextmenu_queue.elements.contextmenulocked.value=e)),!0}function hcms_isLockedContext(){var e="false";if(document.forms.contextmenu_object?e=document.forms.contextmenu_object.elements.contextmenulocked.value:document.forms.contextmenu_user?e=document.forms.contextmenu_user.elements.contextmenulocked.value:document.forms.contextmenu_queue&&(e=document.forms.contextmenu_queue.elements.contextmenulocked.value),"true"==e||!0==e)var t=!0;else var t=!1;return t}function hcms_getMouseXY(e){if(!e)var e=window.event;return e.clientX||e.clientY?(hcms_getScrollXY(),tempX=e.clientX+scrollX,tempY=e.clientY+scrollY,x2=e.clientX,y2=e.clientY):(e.pageX||e.pageY)&&(tempX=e.pageX,tempY=e.pageY,x2=e.pageX,y2=e.pageY),tempX<0&&(tempX=0),tempY<0&&(tempY=0),hcms_drawSelectArea(),!0}function hcms_getScrollXY(){return"number"==typeof window.pageYOffset?(scrollY=window.pageYOffset,scrollX=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(scrollY=document.body.scrollTop,scrollX=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(scrollY=document.documentElement.scrollTop,scrollX=document.documentElement.scrollLeft),!0}function hcms_getWindowWidth(e){return(void 0==e&&(e=window),e.innerWidth)?e.innerWidth:e.document.documentElement&&e.document.documentElement.clientWidth?e.document.documentElement.clientWidth:e.document.body.offsetWidth}function hcms_getWindowHeight(e){return(void 0==e&&(e=window),e.innerHeight)?e.innerHeight:e.document.documentElement&&e.document.documentElement.clientHeight?e.document.documentElement.clientHeight:e.document.body.offsetHeight}function hcms_positionContextmenu(){if(document.all){var e=document.all.contextLayer;yoffset=tempY>hcms_getWindowHeight()/2?parseInt(e.style.height)+0:5,contextxmove&&(e.style.left=tempX-5+"px"),contextymove&&(e.style.top=tempY-yoffset+"px"),e.style.visibility="visible"}else if(document.layers){var e=document.layers.contextLayer;yoffset=tempY>hcms_getWindowHeight()/2?parseInt(e.style.height)+0:5,contextxmove&&(e.left=tempX-5+"px"),contextymove&&(e.top=tempY-yoffset+"px"),e.visibility="visible"}else{var e=document.getElementById("contextLayer");yoffset=tempY>hcms_getWindowHeight()/2?parseInt(e.style.height)+0:5,contextxmove&&(e.style.left=tempX-5+"px"),contextymove&&(e.style.top=tempY-yoffset+"px"),e.style.visibility="visible"}return!0}function hcms_showContextmenu(){if(document.forms.contextmenu_object){document.forms.contextmenu_object.elements.contextmenustatus.value="visible";var e=document.forms.contextmenu_object.elements.contexttype.value,t=document.forms.contextmenu_object.elements.multiobject.value,n=t.split("|").length-1;if(contextenable){if("object"==e||"folder"==e||""!=t&&"media"==e){if(document.getElementById("img_preview")&&(document.getElementById("img_preview").className="hcmsIconOn hcmsIconList"),document.getElementById("img_cmsview")&&(document.getElementById("img_cmsview").className="hcmsIconOn hcmsIconList"),document.getElementById("img_notify")&&(document.getElementById("img_notify").className="hcmsIconOn hcmsIconList"),document.getElementById("img_chat")&&n<=1?document.getElementById("img_chat").className="hcmsIconOn hcmsIconList":document.getElementById("img_chat")&&(document.getElementById("img_chat").className="hcmsIconOff hcmsIconList"),document.getElementById("img_restore")&&(document.getElementById("img_restore").className="hcmsIconOn hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOn hcmsIconList"),document.getElementById("img_cut")&&(document.getElementById("img_cut").className="hcmsIconOn hcmsIconList"),document.getElementById("img_copy")&&(document.getElementById("img_copy").className="hcmsIconOn hcmsIconList"),document.getElementById("img_copylinked")&&(document.getElementById("img_copylinked").className="hcmsIconOn hcmsIconList"),document.getElementById("img_publish")&&(document.getElementById("img_publish").className="hcmsIconOn hcmsIconList"),document.getElementById("img_unpublish")&&(document.getElementById("img_unpublish").className="hcmsIconOn hcmsIconList"),document.getElementById("img_unlock")&&(document.getElementById("img_unlock").className="hcmsIconOn hcmsIconList"),document.getElementById("img_fav_create")&&(document.getElementById("img_fav_create").className="hcmsIconOn hcmsIconList"),document.getElementById("img_fav_delete")&&(document.getElementById("img_fav_delete").className="hcmsIconOn hcmsIconList"),document.getElementsByName("img_plugin"))for(var s=document.getElementsByName("img_plugin"),m=0;m<s.length;m++)s[m].className="hcmsIconOn hcmsIconList"}else if(""==t&&"media"==e){if(document.getElementById("img_preview")&&(document.getElementById("img_preview").className="hcmsIconOn hcmsIconList"),document.getElementById("img_cmsview")&&(document.getElementById("img_cmsview").className="hcmsIconOn hcmsIconList"),document.getElementById("img_notify")&&(document.getElementById("img_notify").className="hcmsIconOn hcmsIconList"),document.getElementById("img_chat")&&n<=1?document.getElementById("img_chat").className="hcmsIconOn hcmsIconList":document.getElementById("img_chat")&&(document.getElementById("img_chat").className="hcmsIconOff hcmsIconList"),document.getElementById("img_restore")&&(document.getElementById("img_restore").className="hcmsIconOn hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOn hcmsIconList"),document.getElementById("img_cut")&&(document.getElementById("img_cut").className="hcmsIconOn hcmsIconList"),document.getElementById("img_copy")&&(document.getElementById("img_copy").className="hcmsIconOn hcmsIconList"),document.getElementById("img_copylinked")&&(document.getElementById("img_copylinked").className="hcmsIconOn hcmsIconList"),document.getElementById("img_publish")&&(document.getElementById("img_publish").className="hcmsIconOn hcmsIconList"),document.getElementById("img_unpublish")&&(document.getElementById("img_unpublish").className="hcmsIconOn hcmsIconList"),document.getElementById("img_unlock")&&(document.getElementById("img_unlock").className="hcmsIconOn hcmsIconList"),document.getElementById("img_fav_create")&&(document.getElementById("img_fav_create").className="hcmsIconOn hcmsIconList"),document.getElementById("img_fav_delete")&&(document.getElementById("img_fav_delete").className="hcmsIconOn hcmsIconList"),document.getElementsByName("img_plugin"))for(var s=document.getElementsByName("img_plugin"),m=0;m<s.length;m++)s[m].className="hcmsIconOn hcmsIconList"}else if(document.getElementById("img_preview")&&(document.getElementById("img_preview").className="hcmsIconOff hcmsIconList"),document.getElementById("img_cmsview")&&(document.getElementById("img_cmsview").className="hcmsIconOff hcmsIconList"),document.getElementById("img_notify")&&(document.getElementById("img_notify").className="hcmsIconOff hcmsIconList"),document.getElementById("img_chat")&&(document.getElementById("img_chat").className="hcmsIconOff hcmsIconList"),document.getElementById("img_restore")&&(document.getElementById("img_restore").className="hcmsIconOff hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOff hcmsIconList"),document.getElementById("img_cut")&&(document.getElementById("img_cut").className="hcmsIconOff hcmsIconList"),document.getElementById("img_copy")&&(document.getElementById("img_copy").className="hcmsIconOff hcmsIconList"),document.getElementById("img_copylinked")&&(document.getElementById("img_copylinked").className="hcmsIconOff hcmsIconList"),document.getElementById("img_publish")&&(document.getElementById("img_publish").className="hcmsIconOff hcmsIconList"),document.getElementById("img_unpublish")&&(document.getElementById("img_unpublish").className="hcmsIconOff hcmsIconList"),document.getElementById("img_unlock")&&(document.getElementById("img_unlock").className="hcmsIconOff hcmsIconList"),document.getElementById("img_fav_create")&&(document.getElementById("img_fav_create").className="hcmsIconOff hcmsIconList"),document.getElementById("img_fav_delete")&&(document.getElementById("img_fav_delete").className="hcmsIconOff hcmsIconList"),document.getElementsByName("img_plugin"))for(var s=document.getElementsByName("img_plugin"),m=0;m<s.length;m++)s[m].className="hcmsIconOff hcmsIconList"}}else if(document.forms.contextmenu_user){document.forms.contextmenu_user.elements.contextmenustatus.value="visible";var t=document.forms.contextmenu_user.elements.multiobject.value;""!=document.forms.contextmenu_user.elements.login.value?(document.getElementById("img_edit")&&(document.getElementById("img_edit").className="hcmsIconOn hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOn hcmsIconList")):(document.getElementById("img_edit")&&(document.getElementById("img_edit").className="hcmsIconOff hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOff hcmsIconList"))}else if(document.forms.contextmenu_queue){document.forms.contextmenu_queue.elements.contextmenustatus.value="visible";var t=document.forms.contextmenu_queue.elements.multiobject.value;""!=document.forms.contextmenu_queue.elements.queue_id.value?(document.getElementById("img_edit")&&(document.getElementById("img_edit").className="hcmsIconOn hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOn hcmsIconList")):(document.getElementById("img_edit")&&(document.getElementById("img_edit").className="hcmsIconOff hcmsIconList"),document.getElementById("img_delete")&&(document.getElementById("img_delete").className="hcmsIconOff hcmsIconList"))}return hcms_positionContextmenu(),!0}function hcms_hideContextmenu(){return document.forms.contextmenu_object&&(document.forms.contextmenu_object.elements.contextmenustatus.value="hidden"),document.forms.contextmenu_user&&(document.forms.contextmenu_user.elements.contextmenustatus.value="hidden"),document.forms.contextmenu_queue&&(document.forms.contextmenu_queue.elements.contextmenustatus.value="hidden"),document.all?document.all.contextLayer.style.visibility="hidden":document.layers?document.layers.contextLayer.visibility="hidden":(contextelement=document.getElementById("contextLayer")).style.visibility="hidden",!0}function hcms_submitToWindow(e,t,n,s){return!!document.forms[e]&&(winName="popup"+hcms_uniqid(),document.forms[e].target=winName,hcms_openWindow("",winName,t,n,s),document.forms[e].submit(),!0)}function hcms_submitToPopup(e,t){if(!document.forms[e]||""==t)return!1;var n=document.forms[e];return!!window.top.openPopup("empty.php",t)&&(n.target=t+"Frame",n.submit(),!0)}function hcms_openPopup(e,t){return""!=e&&""!=t&&(window.top.openPopup(e,t),!0)}function hcms_emptyRecycleBin(e){return hcms_lockContext("true"),document.forms.contextmenu_object&&!0==(check=confirm_delete())&&(document.forms.contextmenu_object.attributes.action.value="popup_status.php",document.forms.contextmenu_object.elements.action.value="emptybin",document.forms.contextmenu_object.elements.force.value="start",document.forms.contextmenu_object.elements.token.value=e,hcms_submitToPopup("contextmenu_object","recyclebin")),hcms_lockContext("false"),!0}function hcms_createContextmenuItem(e){if(hcms_lockContext("true"),null!==localStorage.getItem("windowwidth")||localStorage.getItem("windowwidth")>0)var t=localStorage.getItem("windowwidth");else var t=800;if(null!==localStorage.getItem("windowheight")||localStorage.getItem("windowheight")>0)var n=localStorage.getItem("windowheight");else var n=1e3;if(null!==localStorage.getItem("object_newwindow")&&"true"==localStorage.getItem("object_newwindow"))var s=!0;else var s=!1;if(null!==localStorage.getItem("message_newwindow")&&"true"==localStorage.getItem("message_newwindow"))var m=!0;else var m=!1;if(null!==localStorage.getItem("user_newwindow")&&"true"==localStorage.getItem("user_newwindow"))var l=!0;else var l=!1;if(document.forms.contextmenu_object){var a=!1,o=document.forms.contextmenu_object,c=o.elements.contexttype.value,u=o.elements.site.value,r=o.elements.cat.value,g=o.elements.location.value,d=o.elements.page.value;o.elements.pagename.value,o.elements.filetype.value,o.elements.media.value;var f=o.elements.folder.value,p=o.elements.multiobject.value,h=p.split("|").length-1,v=o.elements.token.value;("object"==c||"media"==c||"folder"==c||"none"==c)&&((("preview"==e||"cmsview"==e||"chat"==e)&&("object"==c||"media"==c?URLparaView="site="+encodeURIComponent(u)+"&cat="+encodeURIComponent(r)+"&location="+encodeURIComponent(g)+"&page="+encodeURIComponent(d)+"&token="+v:"folder"==c&&(URLparaView="site="+encodeURIComponent(u)+"&cat="+encodeURIComponent(r)+"&location="+encodeURIComponent(g+f)+"/&folder="+encodeURIComponent(f)+"&page="+encodeURIComponent(d)+"&token="+v)),"preview"==e)?(""!=f&&(g=g+f+"/"),openObjectView(g,d,"preview")):"cmsview"==e?p.split("|").length>2&&parent&&parent.frames&&parent.frames.controlFrame&&parent.frames.controlFrame.submitToWindow?!0==s?parent.frames.controlFrame.submitToWindow("page_multiedit.php","","multiedit","status=yes,scrollbars=yes,resizable=yes",t,n):parent.frames.controlFrame.submitToMainFrame("page_multiedit.php",""):!0==s?hcms_openWindow("frameset_content.php?ctrlreload=yes&"+URLparaView,"","status=yes,scrollbars=no,resizable=yes",t,n):top.openMainView("frameset_content.php?ctrlreload=yes&"+URLparaView):"notify"==e?(URLfile="popup_notify.php",o.attributes.action.value=URLfile,hcms_submitToPopup("contextmenu_object","notify")):"chat"==e?h<=1&&sendtochat("hcms_openWindow('frameset_content.php?ctrlreload=yes&"+URLparaView+"', '', 'status=yes,scrollbars=no,resizable=yes', 800, 1000);"):"restore"==e?(o.attributes.action.value="popup_status.php",o.elements.action.value=e,o.elements.force.value="start",hcms_submitToPopup("contextmenu_object","restore"+hcms_uniqid())):"delete"==e?((""!=p||""!=d||""!=f)&&!0==hcms_permission.delete&&(a=confirm_delete()),!0==a&&(o.attributes.action.value="popup_status.php",o.elements.action.value=e,o.elements.force.value="start",hcms_submitToPopup("contextmenu_object","delete"+hcms_uniqid()))):"cut"==e||"copy"==e||"linkcopy"==e?!0==hcms_permission.rename&&(o.attributes.action.value="popup_action.php",o.elements.action.value=e,hcms_submitToPopup("contextmenu_object",e+hcms_uniqid())):"paste"==e?""!=u&&""!=g&&!0==hcms_permission.paste&&hcms_openPopup("popup_status.php?force=start&action="+encodeURIComponent(e)+"&site="+encodeURIComponent(u)+"&cat="+encodeURIComponent(r)+"&location="+encodeURIComponent(g)+"&token="+v,"paste"+hcms_uniqid()):"publish"==e||"unpublish"==e?!0==hcms_permission.publish&&(URLfile="popup_publish.php",o.attributes.action.value=URLfile,o.elements.action.value=e,o.elements.force.value="start",hcms_submitToPopup("contextmenu_object","publish"+hcms_uniqid())):"favorites_create"==e?(o.attributes.action.value="popup_action.php",o.elements.action.value="page_favorites_create",hcms_submitToPopup("contextmenu_object","fav"+hcms_uniqid()),allow_tr_submit=!1):"favorites_delete"==e?(o.attributes.action.value="popup_action.php",o.elements.action.value="page_favorites_delete",hcms_submitToPopup("contextmenu_object","fav"+hcms_uniqid()),allow_tr_submit=!1):"checkin"==e?(o.attributes.action.value="popup_action.php",o.elements.action.value="page_unlock",hcms_submitToPopup("contextmenu_object","checkin"+hcms_uniqid()),allow_tr_submit=!1):""!=e&&(o.attributes.action.value=e,o.attributes.target.value="workplFrame",o.elements.action.value="plugin",o.submit(),allow_tr_submit=!1))}else if(document.forms.contextmenu_user){var a=!1,o=document.forms.contextmenu_user,u=o.elements.site.value,y=o.elements.group.value,b=o.elements.login.value,p=o.multiobject.value,v=o.elements.token.value;"edit"==e?!0==l?hcms_openWindow("user_edit.php?site="+encodeURIComponent(u)+"&group="+encodeURIComponent(y)+"&login="+encodeURIComponent(b)+"&token="+v,"edit","status=yes,scrollbars=yes,resizable=yes",560,800):parent.openPopup("user_edit.php?site="+encodeURIComponent(u)+"&group="+encodeURIComponent(y)+"&login="+encodeURIComponent(b)+"&token="+v):"delete"==e&&((""!=p||""!=b)&&(a=confirm_delete()),!0==a&&(o.attributes.action.value="control_user_menu.php",o.attributes.target.value="controlFrame",o.elements.action.value=e,o.submit(),allow_tr_submit=!1))}else if(document.forms.contextmenu_queue){var a=!1,o=document.forms.contextmenu_queue,u=o.elements.site.value,r=o.elements.cat.value,g=o.elements.location.value,d=o.elements.page.value;o.elements.pagename.value,o.elements.filetype.value;var x=o.elements.queueuser.value,I=o.elements.queue_id.value,p=o.elements.multiobject.value,v=o.elements.token.value;"edit"==e?""!=u&&""!=g?!0==s?hcms_openWindow("frameset_content.php?site="+encodeURIComponent(u)+"&ctrlreload=yes&cat="+encodeURIComponent(r)+"&location="+encodeURIComponent(g)+"&page="+encodeURIComponent(d)+"&queueuser="+encodeURIComponent(x)+"&queue_id="+encodeURIComponent(I)+"&token="+v,"","status=yes,scrollbars=no,resizable=yes",800,1e3):top.openMainView("frameset_content.php?site="+encodeURIComponent(u)+"&ctrlreload=yes&cat="+encodeURIComponent(r)+"&location="+encodeURIComponent(g)+"&page="+encodeURIComponent(d)+"&queueuser="+encodeURIComponent(x)+"&queue_id="+encodeURIComponent(I)+"&token="+v):""!=d&&(!0==m?hcms_openWindow("user_sendlink.php?mailfile="+encodeURIComponent(d)+"&cat="+encodeURIComponent(r)+"&queueuser="+encodeURIComponent(x)+"&queue_id="+encodeURIComponent(I)+"&token="+v,"","status=yes,scrollbars=no,resizable=yes",600,800):""!=d&&parent.openPopup("user_sendlink.php?mailfile="+encodeURIComponent(d)+"&cat="+encodeURIComponent(r)+"&queueuser="+encodeURIComponent(x)+"&queue_id="+encodeURIComponent(I)+"&token="+v)):"delete"==e&&((""!=p||""!=d)&&(a=confirm_delete()),!0==a&&(o.attributes.action.value="control_queue_menu.php",o.attributes.target.value="controlFrame",o.elements.action.value=e,o.submit(),allow_tr_submit=!1))}else if(document.forms.contextmenu_message){var a=!1,E=document.forms.contextmenu_message.elements.messageuser.value,j=document.forms.contextmenu_message.elements.message_id.value,p=document.forms.contextmenu_message.elements.multiobject.value,v=document.forms.contextmenu_message.elements.token.value;"edit"==e?!0==m?hcms_openWindow("user_sendlink.php?mailfile="+encodeURIComponent(j)+"&cat=comp&messageuser="+encodeURIComponent(E)+"&token="+v,"","status=yes,scrollbars=no,resizable=yes",600,800):parent.openPopup("user_sendlink.php?mailfile="+encodeURIComponent(j)+"&cat=comp&messageuser="+encodeURIComponent(E)+"&token="+v):"delete"==e&&((""!=p||""!=j)&&(a=confirm_delete()),!0==a&&(document.forms.contextmenu_message.attributes.action.value="control_message_menu.php",document.forms.contextmenu_message.attributes.target.value="controlFrame",document.forms.contextmenu_message.elements.action.value=e,document.forms.contextmenu_message.submit(),allow_tr_submit=!1))}return hcms_lockContext("false"),!0}function hcms_setObjectcontext(e,t,n,s,m,l,a,o,c,u){if(document.forms.contextmenu_object&&!1==hcms_isLockedContext()){if(hcms_hideContextmenu(),!g)var r,g=window.event;void 0!=g.stopPropagation&&g.stopPropagation(),r=""!=o?"folder":""!=a?"media":""!=s?"object":"none";var d=document.forms.contextmenu_object;d.style.display="block",document.forms.contextmenu_column&&(document.forms.contextmenu_column.style.display="none"),d.elements.contexttype.value=r,d.elements.xpos.value=tempX,d.elements.ypos.value=tempY,d.elements.site.value=e,d.elements.cat.value=t,d.elements.location.value=n,d.elements.page.value=s,d.elements.pagename.value=m,d.elements.filetype.value=l,d.elements.media.value=a,d.elements.folder.value=o,d.elements.folder_id&&(d.elements.folder_id.value=c),d.elements.token.value=u}return!0}function hcms_setColumncontext(){if(document.forms.contextmenu_column){if(hcms_hideContextmenu(),!e)var e=window.event;void 0!=e.stopPropagation&&e.stopPropagation(),document.forms.contextmenu_column.style.display="block",document.forms.contextmenu_object&&(document.forms.contextmenu_object.style.display="none")}return!0}function hcms_setUsercontext(e,t,n){if(document.forms.contextmenu_user&&!1==hcms_isLockedContext()){if(hcms_hideContextmenu(),!s)var s=window.event;void 0!=s.stopPropagation&&s.stopPropagation();var m=document.forms.contextmenu_user;m.elements.xpos.value=tempX,m.elements.ypos.value=tempY,m.elements.site.value=e,m.elements.login.value=t,m.elements.token.value=n}return!0}function hcms_setQueuecontext(e,t,n,s,m,l,a,o,c){if(document.forms.contextmenu_queue&&!1==hcms_isLockedContext()){if(hcms_hideContextmenu(),!u)var u=window.event;void 0!=u.stopPropagation&&u.stopPropagation();var r=document.forms.contextmenu_queue;r.elements.xpos.value=tempX,r.elements.ypos.value=tempY,r.elements.site.value=e,r.elements.cat.value=t,r.elements.location.value=n,r.elements.page.value=s,r.elements.pagename.value=m,r.elements.filetype.value=l,r.elements.queueuser.value=a,r.elements.queue_id.value=o,r.elements.token.value=c}return!0}function hcms_setMessagecontext(e,t,n){if(document.forms.contextmenu_message&&!1==hcms_isLockedContext()){if(hcms_hideContextmenu(),!s)var s=window.event;void 0!=s.stopPropagation&&s.stopPropagation();var m=document.forms.contextmenu_message;m.elements.xpos.value=tempX,m.elements.ypos.value=tempY,m.elements.messageuser.value=e,m.elements.message_id.value=t,m.elements.token.value=n}return!0}function hcms_replace(e,t,n){var s=e.length,m=t.length;if(0==s||0==m)return e;var l=e.indexOf(t);if(!l&&t!=e.substring(0,m)||-1==l)return e;var a=e.substring(0,l)+n;return l+m<s&&(a+=hcms_replace(e.substring(l+m,s),t,n)),a}function hcms_endsWith(e,t){return -1!==e.indexOf(t,e.length-t.length)}function hcms_selectObject(e,t){var n=!1,s=!1;if(""==e)return!1;if(e=(e=(e=(e=e.replace("g","")).replace("h","")).replace("_0","")).replace("t",""),document.forms.contextmenu_object?n=document.forms.contextmenu_object:document.forms.contextmenu_user?n=document.forms.contextmenu_user:document.forms.contextmenu_queue?n=document.forms.contextmenu_queue:document.forms.contextmenu_message&&(n=document.forms.contextmenu_message),!1==n)return!1;if(""==n.elements.multiobject.value&&(hcms_unselectAll(!0),s=!0),!0==hcms_keyPressed("ctrl",t)||"selectarea"==t||is_mobile){var m=n.elements.multiobject.value,l=m+"|",a=document.getElementById("h"+e+"_0"),o=a.getElementsByTagName("A");if(o)var c=o[0].getAttribute("data-objectpath");else var c="";return""!=c&&("|"==m||-1==l.indexOf("|"+c+"|")?(n.elements.multiobject.value=m+"|"+c,document.getElementById("g"+e).className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+e).className="hcmsObjectSelected"),hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0):""!=m&&(m==c?n.elements.multiobject.value=hcms_replace(m,c,""):hcms_endsWith(m,"|"+c)?n.elements.multiobject.value=hcms_replace(m,"|"+c,""):n.elements.multiobject.value=hcms_replace(m,"|"+c+"|","|"),document.getElementById("g"+e).className="hcmsObjectUnselected",document.getElementById("objectgallery")&&(document.getElementById("t"+e).className="hcmsObjectUnselected"),hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0))}if(!0==hcms_keyPressed("shift",t)){var m=n.elements.multiobject.value,l=m+"|",a=document.getElementById("h"+e+"_0"),o=a.getElementsByTagName("A");if(o)var c=o[0].getAttribute("data-objectpath");else var c="";if(""==c)return!1;if(""==m)return n.elements.multiobject.value=m+"|"+c,document.getElementById("g"+e).className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+e).className="hcmsObjectSelected"),hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0;if(""!=m){var u=m.substring(m.lastIndexOf("|")+1),r=c,g=document.getElementById("objectlist").getElementsByTagName("TR"),e=0,d=!1,f=!1,p="";for(i=0;i<g.length;i++){var o=g[i].getElementsByTagName("A");c=o?o[0].getAttribute("data-objectpath"):"","1"==p&&!0==d&&!1==f&&-1==l.indexOf("|"+c+"|")&&(m=m+"|"+c,e=(e=g[i].id).substr(1),g[i].className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+e).className="hcmsObjectSelected")),c==u?(""==p&&(p="1"),!1==d?d=!0:!0==d&&(f=!0)):c==r&&(""==p&&(p="0"),!1==d?d=!0:!0==d&&(f=!0)),"0"==p&&!0==d&&!1==f&&-1==l.indexOf("|"+c+"|")&&(m=m+"|"+c,e=(e=g[i].id).substr(1),g[i].className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+e).className="hcmsObjectSelected"))}return n.elements.multiobject.value=m,hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0}}else{!1==s&&hcms_unselectAll(!1);var a=document.getElementById("h"+e+"_0"),o=a.getElementsByTagName("A");if(o[0])var c=o[0].getAttribute("data-objectpath");else var c="";return""!=c&&(n.elements.multiobject.value="|"+c,document.getElementById("g"+e).className="hcmsObjectSelected",document.getElementById("objectgallery")&&(document.getElementById("t"+e).className="hcmsObjectSelected"),hcms_updateControlObjectListMenu(),hcms_updateControlUserMenu(),hcms_updateControlQueueMenu(),hcms_updateControlMessageMenu(),!0)}}function hcms_updateControlObjectListMenu(){return!!document.forms.contextmenu_object&&(document.forms.contextmenu_object.attributes.action.value="control_objectlist_menu.php",document.forms.contextmenu_object.attributes.target.value="controlFrame",document.forms.contextmenu_object.elements.action.value="",allow_tr_submit&&""!=document.forms.contextmenu_object.elements.location.value?document.forms.contextmenu_object.submit():allow_tr_submit=!0,is_mobile||hcms_loadSidebar(),!0)}function hcms_updateControlUserMenu(){if(!document.forms.contextmenu_user)return!1;var e=document.forms.contextmenu_user;return e.attributes.action.value="control_user_menu.php",e.attributes.target.value="controlFrame",e.elements.action.value="",allow_tr_submit?e.submit():allow_tr_submit=!0,!0}function hcms_updateControlQueueMenu(){if(!document.forms.contextmenu_queue)return!1;var e=document.forms.contextmenu_queue;return e.attributes.action.value="control_queue_menu.php",e.attributes.target.value="controlFrame",e.elements.action.value="",allow_tr_submit?e.submit():allow_tr_submit=!0,!0}function hcms_updateControlMessageMenu(){return!!document.forms.contextmenu_message&&(document.forms.contextmenu_message.attributes.action.value="control_message_menu.php",document.forms.contextmenu_message.attributes.target.value="controlFrame",document.forms.contextmenu_message.elements.action.value="",allow_tr_submit?document.forms.contextmenu_message.submit():allow_tr_submit=!0,!0)}function hcms_selectAll(e){if(e=void 0===e||e,document.getElementById("objectlist")){var t="",n="",s=document.getElementById("objectlist"),m=s.getElementsByTagName("TR");for(i=0;i<m.length;i++)(t=m[i].getElementsByTagName("A"))&&""!=(object=t[0].getAttribute("data-objectpath"))&&(n=n+"|"+object),m[i].className="hcmsObjectSelected"}if(document.getElementById("objectgallery")){var s=document.getElementById("objectgallery"),l=s.children;for(i=0;i<l.length;i++)l[i].className="hcmsObjectSelected"}return document.forms.contextmenu_object&&document.forms.contextmenu_object.elements.multiobject?(document.forms.contextmenu_object.elements.multiobject.value=n,e&&hcms_updateControlObjectListMenu()):document.forms.contextmenu_user&&document.forms.contextmenu_user.elements.multiobject?(document.forms.contextmenu_user.elements.multiobject.value=n,e&&hcms_updateControlUserMenu()):document.forms.contextmenu_queue&&document.forms.contextmenu_queue.elements.multiobject?(document.forms.contextmenu_queue.elements.multiobject.value=n,e&&hcms_updateControlQueueMenu()):document.forms.contextmenu_message&&document.forms.contextmenu_message.elements.multiobject&&(document.forms.contextmenu_message.elements.multiobject.value=n,e&&hcms_updateControlMessageMenu()),!0}function hcms_unselectAll(e){if(e=void 0===e||e,document.getElementById("objectlist")){var t=document.getElementById("objectlist"),n=t.getElementsByTagName("TR");for(i=0;i<n.length;i++)n[i].className="hcmsObjectUnselected"}if(document.getElementById("objectgallery")){var t=document.getElementById("objectgallery"),s=t.children;for(i=0;i<s.length;i++)s[i].className="hcmsObjectUnselected"}return document.forms.contextmenu_object&&document.forms.contextmenu_object.elements.multiobject.value?(document.forms.contextmenu_object.elements.multiobject.value="",e&&hcms_updateControlObjectListMenu()):document.forms.contextmenu_user&&document.forms.contextmenu_user.elements.multiobject.value?(document.forms.contextmenu_user.elements.multiobject.value="",e&&hcms_updateControlUserMenu()):document.forms.contextmenu_queue&&document.forms.contextmenu_queue.elements.multiobject.value?(document.forms.contextmenu_queue.elements.multiobject.value="",e&&hcms_updateControlQueueMenu()):document.forms.contextmenu_message&&document.forms.contextmenu_message.elements.multiobject.value&&(document.forms.contextmenu_message.elements.multiobject.value="",e&&hcms_updateControlMessageMenu()),!0}function hcms_Contextmenu(e){if(!e)var e=window.event;return!0==activatelinks||(void 0!=e.preventDefault&&e.preventDefault(),void 0!=e.stopPropagation&&e.stopPropagation(),!1)}function hcms_rightClickContext(e){if(!e)var e=window.event;return!1==activatelinks&&(e.which&&(2==e.which||3==e.which)?hcms_showContextmenu():e.button&&(2==e.button||3==e.button)&&hcms_showContextmenu(),hcms_startSelectArea(e)),!1}function hcms_leftClickContext(e){if(!e)var t,n,e=window.event;var s=0;return is_mobile&&!0==hcms_permission.minnavframe&&"function"==typeof top.minNavFrame&&top.minNavFrame(),hcms_clearSelection(),document.forms.contextmenu_object?(t=document.forms.contextmenu_object.elements.page.value,n=document.forms.contextmenu_object.elements.multiobject.value):document.forms.contextmenu_user?(t=document.forms.contextmenu_user.elements.login.value,n=document.forms.contextmenu_user.elements.multiobject.value):document.forms.contextmenu_queue?(t=document.forms.contextmenu_queue.elements.page.value,n=document.forms.contextmenu_queue.elements.multiobject.value):document.forms.contextmenu_message&&(t=document.forms.contextmenu_message.elements.message_id.value,n=document.forms.contextmenu_message.elements.multiobject.value),""!=n&&(s=n.split("|").length-1),(0==e.which||1==e.which||0==e.button||1==e.button)&&(hcms_hideContextmenu(),!1==hcms_keyPressed("",e)&&""==t&&s>=1&&!1==is_selectarea&&(hcms_unselectAll(!0),hcms_resetContext())),!1}function hcms_getlink(e,t){if(""==e)return!1;var n="",s="";return($.ajax({async:!1,type:"POST",url:"service/getlink.php",data:{location:e},dataType:"json",success:function(e){e.success&&(n=e.downloadlink,s=e.downloadlink)}}),"download"==t&&""!=n)?n:"wrapper"==t&&""!=s&&s}function hcms_activateLinks(e){if(!e)var e=window.event;if(!1==is_dragndrop&&hcms_keyPressed("alt",e)&&document.forms.contextmenu_object){for(var t=document.getElementsByTagName("A"),n=!1,s=!1,m=0;m<t.length;m++){var l=t[m],a=l.getAttribute("data-href"),o=l.getAttribute("data-objectpath"),c=l.getAttribute("data-linktype");if("download"==c||"wrapper"==c){if(!1==activatelinks){if(""!=a){var u=document.createAttribute("href");u.nodeValue=a,l.setAttributeNode(u)}else{!1==s&&document.getElementById("hcmsLoadScreen")&&(document.getElementById("hcmsLoadScreen").style.display="inline",s=!0);var a=hcms_getlink(o,c);l.setAttribute("data-href",a);var u=document.createAttribute("href");u.nodeValue=a,l.setAttributeNode(u)}}else{var r=l.getAttributeNode("href");l.removeAttributeNode(r)}n=!0}}!0==n&&(!1==activatelinks?(document.getElementsByTagName("body")[0].className="hcmsWorkplaceObjectlistLinks",activatelinks=!0,document.getElementById("hcmsLoadScreen")&&(document.getElementById("hcmsLoadScreen").style.display="none")):(document.getElementsByTagName("body")[0].className="hcmsWorkplaceObjectlist",activatelinks=!1))}}function hcms_startSelectArea(e){if(!e)var e=window.event;return!1==activatelinks&&!!selectarea&&(0==e.which||1==e.which||0==e.button||1==e.button)&&(x1=e.clientX,y1=e.clientY,is_dragndrop=!1,!0)}function hcms_drawSelectArea(){return!1==is_dragndrop&&!1==activatelinks&&!!selectarea&&x1>0&&y1>0&&(is_selectarea=!0,x3=Math.min(x1,x2),x4=Math.max(x1,x2),y3=Math.min(y1,y2),y4=Math.max(y1,y2),hcms_clearSelection(),(""==selectarea.style.display||"none"==selectarea.style.display)&&x4-x3>5&&y4-y3>5&&(selectarea.style.display="inline"),"none"!=selectarea.style.display)&&(selectarea.style.left=x3+"px",selectarea.style.top=y3+"px",selectarea.style.width=x4-x3+"px",selectarea.style.height=y4-y3+"px",!0)}function hcms_endSelectArea(){var e=!1;if(!1==is_dragndrop&&!1==activatelinks&&selectarea&&"none"!=selectarea.style.display&&x1>0&&y1>0&&0!=x3&&0!=y3&&0!=x4&&0!=y4&&x4-x3>5&&y4-y3>5){if(hcms_unselectAll(!1),document.getElementById("objectLayer")&&"visible"==document.getElementById("objectLayer").style.visibility)var t,n,s,m,l=document.getElementsByClassName("hcmsObjectListMarker"),a=80,o=10;else if(document.getElementById("galleryviewLayer")&&"visible"==document.getElementById("galleryviewLayer").style.visibility)var l=document.getElementsByClassName("hcmsObjectGalleryMarker"),a=80,o=80;if(l&&l.length>0){for(var c=0;c<l.length;c++)s=(n=l[c].getBoundingClientRect()).left,m=n.top,s>=x3-a&&m>=y3-o&&s<=x4-a&&m<=y4-o&&(hcms_selectObject(t=l[c].parentElement.id,"selectarea"),e=!0);e&&(document.forms.contextmenu_object?setTimeout(hcms_updateControlObjectListMenu,300):document.forms.contextmenu_user?setTimeout(hcms_updateControlUserMenu,300):document.forms.contextmenu_queue?setTimeout(hcms_updateControlQueueMenu,300):document.forms.contextmenu_message&&setTimeout(hcms_updateControlMessageMenu,300))}}return x1=0,y1=0,x2=0,y2=0,x3=0,y3=0,x4=0,y4=0,selectarea&&(setTimeout(function(){is_selectarea=!1},300),selectarea.style.display="none"),!!e}function hcms_collectObjectpath(){if(document.getElementById("h0_0"))for(var e=null,t=0;e=document.getElementById("h"+t+"_0");){var n=e.getElementsByTagName("A");n[0].getAttribute("data-objectpath")&&(hcms_objectpath[t]=n[0].getAttribute("data-objectpath")),t++}hcms_objectpath&&(parent.hcms_objectpath=hcms_objectpath)}function hcms_findElementByTagName(e,t){if(""!=t){if(t=t.toUpperCase(),e.tagName==t)return e;for(;e.parentNode;)if((e=e.parentNode).tagName==t)return e}return null}function hcms_setDragImage(e){if(!0==is_dragndrop&&"ie"!=hcms_getBrowserName()&&e.dataTransfer&&"function"==typeof e.dataTransfer.setDragImage){var t=document.createElement("img");t.src=themelocation+"/img/button_file_copy.png",e.dataTransfer.setDragImage(t,32,32)}}function hcms_drag(e){if(!is_mobile&&"ie"!=hcms_getBrowserName()&&e.dataTransfer&&"function"==typeof e.dataTransfer.setData&&document.forms.contextmenu_object){is_dragndrop=!0,hcms_setDragImage(e);var t=document.forms.contextmenu_object;e.dataTransfer.setData("is_object","1"),e.dataTransfer.setData("action",t.elements.action.value),e.dataTransfer.setData("force",t.elements.force.value),e.dataTransfer.setData("contexttype",t.elements.contexttype.value),e.dataTransfer.setData("site",t.elements.site.value),e.dataTransfer.setData("cat",t.elements.cat.value),e.dataTransfer.setData("location",t.elements.location.value),e.dataTransfer.setData("page",t.elements.page.value),e.dataTransfer.setData("pagename",t.elements.pagename.value),e.dataTransfer.setData("filetype",t.elements.filetype.value),e.dataTransfer.setData("media",t.elements.media.value),e.dataTransfer.setData("folder",t.elements.folder.value),e.dataTransfer.setData("multiobject",t.elements.multiobject.value),e.dataTransfer.setData("token",t.elements.token.value),e.dataTransfer.setData("convert_type",t.elements.convert_type.value),e.dataTransfer.setData("convert_cfg",t.elements.convert_cfg.value)}}function hcms_drop(e){if(!is_mobile&&"ie"!=hcms_getBrowserName()&&e.target&&e.dataTransfer&&"function"==typeof e.dataTransfer.getData&&e.dataTransfer.getData("site")&&e.dataTransfer.getData("location")&&document.forms.contextmenu_object){e.preventDefault();var t=hcms_findElementByTagName(e.target,"A");if(t){var n=document.forms.memory,s=t.getAttribute("data-objectpath");n.attributes.action.value="popup_status.php",hcms_keyPressed("alt",e)?n.elements.action.value="linkcopy->paste":hcms_keyPressed("ctrl",e)?n.elements.action.value="copy->paste":n.elements.action.value="cut->paste",n.elements.force.value="start",n.elements.contexttype.value=e.dataTransfer.getData("contexttype"),n.elements.site.value=e.dataTransfer.getData("site"),n.elements.cat.value=e.dataTransfer.getData("cat"),n.elements.location.value=e.dataTransfer.getData("location"),n.elements.targetlocation.value=s,n.elements.page.value=e.dataTransfer.getData("page"),n.elements.pagename.value=e.dataTransfer.getData("pagename"),n.elements.filetype.value=e.dataTransfer.getData("filetype"),n.elements.media.value=e.dataTransfer.getData("media"),n.elements.folder.value=e.dataTransfer.getData("folder"),n.elements.multiobject.value=e.dataTransfer.getData("multiobject"),n.elements.token.value=e.dataTransfer.getData("token"),n.elements.convert_type.value=e.dataTransfer.getData("convert_type"),n.elements.convert_cfg.value=e.dataTransfer.getData("convert_cfg"),hcms_submitToPopup("memory","drop")}}else is_mobile||e.preventDefault()}function hcms_allowDrop(e){if(!is_mobile&&"ie"!=hcms_getBrowserName()&&e.dataTransfer.items&&document.forms.contextmenu_object){e.preventDefault();for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind&&""!=e.dataTransfer.items[t].type&&"1"!=e.dataTransfer.getData("is_object")){var n=document.forms.contextmenu_object,s=n.elements.site.value,m=n.elements.cat.value,l=n.elements.location.value;s&&m&&l&&window.top.openPopup("popup_upload_html.php?uploadmode=multi&site="+encodeURIComponent(s)+"&cat="+encodeURIComponent(m)+"&location="+encodeURIComponent(l),"upload"+hcms_md5(l).substr(0,13))}}}hcms_addEvent("keydown",document,function(e){!0==hcms_permission.shortcuts&&(hcms_activateLinks(e),hcms_keyPressed("ctrl",e)&&("a"===e.key||"A"==e.key)&&(e.preventDefault(),hcms_selectAll()),hcms_keyPressed("ctrl",e)&&("x"==e.key||"X"==e.key)&&(e.preventDefault(),hcms_createContextmenuItem("cut")),hcms_keyPressed("ctrl",e)&&("c"==e.key||"C"==e.key)&&(e.preventDefault(),hcms_createContextmenuItem("copy")),hcms_keyPressed("ctrl",e)&&("y"==e.key||"Y"==e.key)&&(e.preventDefault(),hcms_createContextmenuItem("linkcopy")),hcms_keyPressed("ctrl",e)&&("v"==e.key||"V"==e.key)&&(e.preventDefault(),hcms_createContextmenuItem("paste")),("Delete"==e.key||8==e.keyCode||46==e.keyCode)&&(e.preventDefault(),hcms_createContextmenuItem("delete")))}),hcms_addEvent("mousemove",document,function(e){hcms_getMouseXY(e)}),hcms_addEvent("contextmenu",document,function(e){hcms_Contextmenu(e)}),hcms_addEvent("mousedown",document,function(e){hcms_rightClickContext(e)}),hcms_addEvent("mouseup",document,function(e){hcms_endSelectArea(e)}),hcms_addEvent("click",document,function(e){hcms_leftClickContext(e)}),window.alert=top.alert;